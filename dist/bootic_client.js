!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)}([function(t,n,r){(function(t){var e=r(1);n.Client=e,t&&(t.bootic={Client:e})}).call(n,function(){return this}())},function(t,n,r){var e=r(2),i=r(3);t.exports=function(){var t="https://api.bootic.net/v1",n=function(t,n){return n.accessToken&&(t.Authorization="Bearer "+n.accessToken),t},r=function(t,n,r){r("Unauthorized")},o=function(t){},s=function(e){e=e||{},this._opts=e,this.logger=e.logger||console,this._authHandler=n,this._rootUrl=e.rootUrl||t,this._retryCount=0,this.onUnauthorized(r),this.onForbidden(r),this.onNetworkError(o)};return s.prototype={authorize:function(t){return this._opts.accessToken=t,this},onUnauthorized:function(t){var n=this;return this._onUnauthorized=function(){return new Promise(function(r,e){t(n,r,e)})},this},onForbidden:function(t){var n=this;return this._onForbidden=function(){return new Promise(function(r,e){t(n,r,e)})},this},onNetworkError:function(t){return this._onNetworkError=t,this},root:function(){return this.run({href:this._rootUrl})},run:function(t,n){var r,o=this,s=t.href,n=n?i.clone(n):{},u=!!t.templated,a=t.method||"get",f={Accept:"application/json","Content-Type":"application/json"};u&&(r=e(s),s=r.fill(n));var l={method:a,headers:this._authHandler(f,this._opts)};"post"!=a&&"put"!=a&&"patch"!=a||(r&&r.varNames.forEach(function(t){delete n[t]}),l.body=JSON.stringify(n));var h=this._onUnauthorized,c=this._onForbidden,g=this._onNetworkError,o=this;return o.logger.log("request",l.method,s),fetch(s,l).then(function(r){return 401==r.status?0==o._retryCount?(o._retryCount++,o.logger.log("401. Retrying..."),h(o).then(function(){return o.run(t,n)})):r.json():403==r.status?c(o).then(function(){return r.json()}):204==r.status?(o._retryCount=0,{}):(o._retryCount=0,r.json())}).catch(function(r){var e=i.clone(t);return e.href=s,e.method=a,o.logger.log("[network error] "+r+" "+e.method+": "+e.href),g(r,e,n),r})}},s}()},function(t,n,r){var e,i,o;!function(r,s){i=[],e=s,o="function"==typeof e?e.apply(n,i):e,!(void 0!==o&&(t.exports=o))}(this,function(){function t(t){return encodeURI(t).replace(/%25[0-9][0-9]/g,function(t){return"%"+t.substring(3)})}function n(n){var r="";e[n.charAt(0)]&&(r=n.charAt(0),n=n.substring(1));var o="",s="",u=!0,a=!1,f=!1;"+"==r?u=!1:"."==r?(s=".",o="."):"/"==r?(s="/",o="/"):"#"==r?(s="#",u=!1):";"==r?(s=";",o=";",a=!0,f=!0):"?"==r?(s="?",o="&",a=!0):"&"==r&&(s="&",o="&",a=!0);for(var l=[],h=n.split(","),c=[],g={},p=0;p<h.length;p++){var v=h[p],d=null;if(v.indexOf(":")!=-1){var b=v.split(":");v=b[0],d=parseInt(b[1])}for(var y={};i[v.charAt(v.length-1)];)y[v.charAt(v.length-1)]=!0,v=v.substring(0,v.length-1);var m={truncate:d,name:v,suffices:y};c.push(m),g[v]=m,l.push(v)}var _=function(n){for(var r="",e=0,i=0;i<c.length;i++){var l=c[i],h=n(l.name);if(null==h||Array.isArray(h)&&0==h.length||"object"==typeof h&&0==Object.keys(h).length)e++;else if(r+=i==e?s:o||",",Array.isArray(h)){a&&(r+=l.name+"=");for(var g=0;g<h.length;g++)g>0&&(r+=l.suffices["*"]?o||",":",",l.suffices["*"]&&a&&(r+=l.name+"=")),r+=u?encodeURIComponent(h[g]).replace(/!/g,"%21"):t(h[g])}else if("object"==typeof h){a&&!l.suffices["*"]&&(r+=l.name+"=");var p=!0;for(var v in h)p||(r+=l.suffices["*"]?o||",":","),p=!1,r+=u?encodeURIComponent(v).replace(/!/g,"%21"):t(v),r+=l.suffices["*"]?"=":",",r+=u?encodeURIComponent(h[v]).replace(/!/g,"%21"):t(h[v])}else a&&(r+=l.name,f&&""==h||(r+="=")),null!=l.truncate&&(h=h.substring(0,l.truncate)),r+=u?encodeURIComponent(h).replace(/!/g,"%21"):t(h)}return r},A=function(t,n){if(s){if(t.substring(0,s.length)!=s)return null;t=t.substring(s.length)}if(1==c.length&&c[0].suffices["*"]){for(var r=c[0],e=r.name,i=r.suffices["*"]?t.split(o||","):[t],f=u&&t.indexOf("=")!=-1,l=1;l<i.length;l++){var t=i[l];f&&t.indexOf("=")==-1&&(i[l-1]+=(o||",")+t,i.splice(l,1),l--)}for(var l=0;l<i.length;l++){var t=i[l];u&&t.indexOf("=")!=-1&&(f=!0);for(var h=t.split(","),p=0;p<h.length;p++)u&&(h[p]=decodeURIComponent(h[p]));1==h.length?i[l]=h[0]:i[l]=h}if(a||f){for(var v=n[e]||{},p=0;p<i.length;p++){var d=t;if(!a||d){if("string"==typeof i[p]){var t=i[p],b=t.split("=",1)[0],t=t.substring(b.length+1);d=t}else{var t=i[p][0],b=t.split("=",1)[0],t=t.substring(b.length+1);i[p][0]=t,d=i[p]}void 0!==v[b]?Array.isArray(v[b])?v[b].push(d):v[b]=[v[b],d]:v[b]=d}}1==Object.keys(v).length&&void 0!==v[e]?n[e]=v[e]:n[e]=v}else void 0!==n[e]?Array.isArray(n[e])?n[e]=n[e].concat(i):n[e]=[n[e]].concat(i):1!=i.length||r.suffices["*"]?n[e]=i:n[e]=i[0]}else{for(var i=1==c.length?[t]:t.split(o||","),y={},l=0;l<i.length;l++){for(var m=0;m<c.length-1&&m<l&&!c[m].suffices["*"];m++);if(m!=l){for(var _=c.length-1;_>0&&c.length-_<i.length-l&&!c[_].suffices["*"];_--);c.length-_!=i.length-l?y[l]=m:y[l]=_}else y[l]=l}for(var l=0;l<i.length;l++){var t=i[l];if(t||!a){var h=t.split(","),f=!1;if(a){var t=h[0],e=t.split("=",1)[0],t=t.substring(e.length+1);h[0]=t;var r=g[e]||c[0]}else var r=c[y[l]],e=r.name;for(var p=0;p<h.length;p++)u&&(h[p]=decodeURIComponent(h[p]));(a||r.suffices["*"])&&void 0!==n[e]?Array.isArray(n[e])?n[e]=n[e].concat(h):n[e]=[n[e]].concat(h):1!=h.length||r.suffices["*"]?n[e]=h:n[e]=h[0]}}}};return _.varNames=l,{prefix:s,substitution:_,unSubstitution:A}}function r(t){if(!(this instanceof r))return new r(t);for(var e=t.split("{"),i=[e.shift()],o=[],s=[],u=[],a=[];e.length>0;){var f=e.shift(),l=f.split("}")[0],h=f.substring(l.length+1),c=n(l);s.push(c.substitution),u.push(c.unSubstitution),o.push(c.prefix),i.push(h),a=a.concat(c.substitution.varNames)}this.fill=function(t){if(t&&"function"!=typeof t){var n=t;t=function(t){return n[t]}}for(var r=i[0],e=0;e<s.length;e++){var o=s[e];r+=o(t),r+=i[e+1]}return r},this.fromUri=function(t){for(var n={},r=0;r<i.length;r++){var e=i[r];if(t.substring(0,e.length)!==e)return;if(t=t.substring(e.length),r>=i.length-1){if(""==t)break;return}for(var s=i[r+1],a=r;;){if(a==i.length-2){var f=t.substring(t.length-s.length);if(f!==s)return;var l=t.substring(0,t.length-s.length);t=f}else if(s){var h=t.indexOf(s),l=t.substring(0,h);t=t.substring(h)}else if(o[a+1]){var h=t.indexOf(o[a+1]);h===-1&&(h=t.length);var l=t.substring(0,h);t=t.substring(h)}else{if(i.length>a+2){a++,s=i[a+1];continue}var l=t;t=""}break}u[r](l,n)}return n},this.varNames=a,this.template=t}var e={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},i={"*":!0};return r.prototype={toString:function(){return this.template},fillFromObject:function(t){return this.fill(t)}},r})},function(t,n){function r(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date){var n=new Date;return n.setTime(t.getTime()),n}if(t instanceof Array){for(var n=[],e=0,i=t.length;e<i;e++)n[e]=r(t[e]);return n}if(t instanceof Object){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=r(t[o]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")}n.clone=r}]);