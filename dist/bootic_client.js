!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){(function(t){var r=e(1);n.Client=r,t.bootic={Client:r}}).call(n,function(){return this}())},function(t,n,e){var r=e(2),i=e(3);t.exports=function(){var t="https://api.bootic.net/v1",n=function(t,n){return n.accessToken&&(t.Authorization="Bearer "+n.accessToken),t},e=function(t,n,e){e("Unauthorized")},o=function(r){r=r||{},this._opts=r,this.logger=r.logger||console,this._authHandler=n,this._rootUrl=r.rootUrl||t,this._retryCount=0,this.onUnauthorized(e),this.onForbidden(e)};return o.prototype={authorize:function(t){return this._opts.accessToken=t,this},onUnauthorized:function(t){var n=this;return this._onUnauthorized=function(){return new Promise(function(e,r){t(n,e,r)})},this},onForbidden:function(t){var n=this;return this._onForbidden=function(){return new Promise(function(e,r){t(n,e,r)})},this},root:function(){return this.run({href:this._rootUrl})},run:function(t,n){var e,o=this,s=t.href,n=n?i.clone(n):{},u=!!t.templated,a=t.method||"get",f={Accept:"application/json","Content-Type":"application/json"};u&&(e=r(s),s=e.fill(n));var l={method:a,headers:this._authHandler(f,this._opts)};"post"!=a&&"put"!=a&&"patch"!=a||(e&&e.varNames.forEach(function(t){delete n[t]}),l.body=JSON.stringify(n));var c=this._onUnauthorized,h=this._onForbidden,o=this;return o.logger.log("request",l.method,s),fetch(s,l).then(function(e){return 401==e.status?0==o._retryCount?(o._retryCount++,o.logger.log("401. Retrying..."),c(o).then(function(){return o.run(t,n)})):e.json():403==e.status?h(o).then(function(){return e.json()}):204==e.status?(o._retryCount=0,{}):(o._retryCount=0,e.json())})}},o}()},function(t,n,e){var r,i,o;!function(e,s){i=[],r=s,o="function"==typeof r?r.apply(n,i):r,!(void 0!==o&&(t.exports=o))}(this,function(){function t(t){return encodeURI(t).replace(/%25[0-9][0-9]/g,function(t){return"%"+t.substring(3)})}function n(n){var e="";r[n.charAt(0)]&&(e=n.charAt(0),n=n.substring(1));var o="",s="",u=!0,a=!1,f=!1;"+"==e?u=!1:"."==e?(s=".",o="."):"/"==e?(s="/",o="/"):"#"==e?(s="#",u=!1):";"==e?(s=";",o=";",a=!0,f=!0):"?"==e?(s="?",o="&",a=!0):"&"==e&&(s="&",o="&",a=!0);for(var l=[],c=n.split(","),h=[],g={},p=0;p<c.length;p++){var v=c[p],d=null;if(v.indexOf(":")!=-1){var b=v.split(":");v=b[0],d=parseInt(b[1])}for(var y={};i[v.charAt(v.length-1)];)y[v.charAt(v.length-1)]=!0,v=v.substring(0,v.length-1);var m={truncate:d,name:v,suffices:y};h.push(m),g[v]=m,l.push(v)}var A=function(n){for(var e="",r=0,i=0;i<h.length;i++){var l=h[i],c=n(l.name);if(null==c||Array.isArray(c)&&0==c.length||"object"==typeof c&&0==Object.keys(c).length)r++;else if(e+=i==r?s:o||",",Array.isArray(c)){a&&(e+=l.name+"=");for(var g=0;g<c.length;g++)g>0&&(e+=l.suffices["*"]?o||",":",",l.suffices["*"]&&a&&(e+=l.name+"=")),e+=u?encodeURIComponent(c[g]).replace(/!/g,"%21"):t(c[g])}else if("object"==typeof c){a&&!l.suffices["*"]&&(e+=l.name+"=");var p=!0;for(var v in c)p||(e+=l.suffices["*"]?o||",":","),p=!1,e+=u?encodeURIComponent(v).replace(/!/g,"%21"):t(v),e+=l.suffices["*"]?"=":",",e+=u?encodeURIComponent(c[v]).replace(/!/g,"%21"):t(c[v])}else a&&(e+=l.name,f&&""==c||(e+="=")),null!=l.truncate&&(c=c.substring(0,l.truncate)),e+=u?encodeURIComponent(c).replace(/!/g,"%21"):t(c)}return e},U=function(t,n){if(s){if(t.substring(0,s.length)!=s)return null;t=t.substring(s.length)}if(1==h.length&&h[0].suffices["*"]){for(var e=h[0],r=e.name,i=e.suffices["*"]?t.split(o||","):[t],f=u&&t.indexOf("=")!=-1,l=1;l<i.length;l++){var t=i[l];f&&t.indexOf("=")==-1&&(i[l-1]+=(o||",")+t,i.splice(l,1),l--)}for(var l=0;l<i.length;l++){var t=i[l];u&&t.indexOf("=")!=-1&&(f=!0);for(var c=t.split(","),p=0;p<c.length;p++)u&&(c[p]=decodeURIComponent(c[p]));1==c.length?i[l]=c[0]:i[l]=c}if(a||f){for(var v=n[r]||{},p=0;p<i.length;p++){var d=t;if("string"==typeof i[p]){var t=i[p],b=t.split("=",1)[0],t=t.substring(b.length+1);d=t}else{var t=i[p][0],b=t.split("=",1)[0],t=t.substring(b.length+1);i[p][0]=t,d=i[p]}void 0!==v[b]?Array.isArray(v[b])?v[b].push(d):v[b]=[v[b],d]:v[b]=d}1==Object.keys(v).length&&void 0!==v[r]?n[r]=v[r]:n[r]=v}else void 0!==n[r]?Array.isArray(n[r])?n[r]=n[r].concat(i):n[r]=[n[r]].concat(i):1!=i.length||e.suffices["*"]?n[r]=i:n[r]=i[0]}else{for(var i=1==h.length?[t]:t.split(o||","),y={},l=0;l<i.length;l++){for(var m=0;m<h.length-1&&m<l&&!h[m].suffices["*"];m++);if(m!=l){for(var A=h.length-1;A>0&&h.length-A<i.length-l&&!h[A].suffices["*"];A--);h.length-A!=i.length-l?y[l]=m:y[l]=A}else y[l]=l}for(var l=0;l<i.length;l++){var t=i[l],c=t.split(",");if(a){var t=c[0],r=t.split("=",1)[0],t=t.substring(r.length+1);c[0]=t;var e=g[r]||h[0]}else var e=h[y[l]],r=e.name;for(var p=0;p<c.length;p++)u&&(c[p]=decodeURIComponent(c[p]));(a||e.suffices["*"])&&void 0!==n[r]?Array.isArray(n[r])?n[r]=n[r].concat(c):n[r]=[n[r]].concat(c):1!=c.length||e.suffices["*"]?n[r]=c:n[r]=c[0]}}};return A.varNames=l,{prefix:s,substitution:A,unSubstitution:U}}function e(t){if(!(this instanceof e))return new e(t);for(var r=t.split("{"),i=[r.shift()],o=[],s=[],u=[],a=[];r.length>0;){var f=r.shift(),l=f.split("}")[0],c=f.substring(l.length+1),h=n(l);s.push(h.substitution),u.push(h.unSubstitution),o.push(h.prefix),i.push(c),a=a.concat(h.substitution.varNames)}this.fill=function(t){if(t&&"function"!=typeof t){var n=t;t=function(t){return n[t]}}for(var e=i[0],r=0;r<s.length;r++){var o=s[r];e+=o(t),e+=i[r+1]}return e},this.fromUri=function(t){for(var n={},e=0;e<i.length;e++){var r=i[e];if(t.substring(0,r.length)!==r)return;if(t=t.substring(r.length),e>=i.length-1){if(""==t)break;return}for(var s=i[e+1],a=e;;){if(a==i.length-2){var f=t.substring(t.length-s.length);if(f!==s)return;var l=t.substring(0,t.length-s.length);t=f}else if(s){var c=t.indexOf(s),l=t.substring(0,c);t=t.substring(c)}else if(o[a+1]){var c=t.indexOf(o[a+1]);c===-1&&(c=t.length);var l=t.substring(0,c);t=t.substring(c)}else{if(i.length>a+2){a++,s=i[a+1];continue}var l=t;t=""}break}u[e](l,n)}return n},this.varNames=a,this.template=t}var r={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},i={"*":!0};return e.prototype={toString:function(){return this.template},fillFromObject:function(t){return this.fill(t)}},e})},function(t,n){function e(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date){var n=new Date;return n.setTime(t.getTime()),n}if(t instanceof Array){for(var n=[],r=0,i=t.length;r<i;r++)n[r]=e(t[r]);return n}if(t instanceof Object){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=e(t[o]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")}n.clone=e}]);